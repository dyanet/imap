"use strict";
var __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    var desc = Object.getOwnPropertyDescriptor(m, k);
    if (!desc || ("get" in desc ? !m.__esModule : desc.writable || desc.configurable)) {
      desc = { enumerable: true, get: function() { return m[k]; } };
    }
    Object.defineProperty(o, k2, desc);
}) : (function(o, m, k, k2) {
    if (k2 === undefined) k2 = k;
    o[k2] = m[k];
}));
var __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {
    Object.defineProperty(o, "default", { enumerable: true, value: v });
}) : function(o, v) {
    o["default"] = v;
});
var __importStar = (this && this.__importStar) || (function () {
    var ownKeys = function(o) {
        ownKeys = Object.getOwnPropertyNames || function (o) {
            var ar = [];
            for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;
            return ar;
        };
        return ownKeys(o);
    };
    return function (mod) {
        if (mod && mod.__esModule) return mod;
        var result = {};
        if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== "default") __createBinding(result, mod, k[i]);
        __setModuleDefault(result, mod);
        return result;
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
exports.GmailViewerCdkStack = void 0;
const cdk = __importStar(require("aws-cdk-lib"));
const apigatewayv2 = __importStar(require("aws-cdk-lib/aws-apigatewayv2"));
const codebuild = __importStar(require("aws-cdk-lib/aws-codebuild"));
const cr = __importStar(require("aws-cdk-lib/custom-resources"));
const ec2 = __importStar(require("aws-cdk-lib/aws-ec2"));
const ecr = __importStar(require("aws-cdk-lib/aws-ecr"));
const ecs = __importStar(require("aws-cdk-lib/aws-ecs"));
const iam = __importStar(require("aws-cdk-lib/aws-iam"));
const logs = __importStar(require("aws-cdk-lib/aws-logs"));
const route53 = __importStar(require("aws-cdk-lib/aws-route53"));
const servicediscovery = __importStar(require("aws-cdk-lib/aws-servicediscovery"));
const secretsmanager = __importStar(require("aws-cdk-lib/aws-secretsmanager"));
const ssm = __importStar(require("aws-cdk-lib/aws-ssm"));
class GmailViewerCdkStack extends cdk.Stack {
    clusterName;
    repositoryUri;
    apiInvokeUrl;
    cloudMapServiceArn;
    constructor(scope, id, props) {
        super(scope, id, props);
        const toNumber = (value, fallback) => {
            const candidate = value ?? fallback;
            const parsed = typeof candidate === 'number' ? candidate : Number(candidate);
            return Number.isFinite(parsed) ? parsed : fallback;
        };
        const toCpuUnits = (value) => {
            const parsed = toNumber(value, 0.5);
            const vcpu = parsed <= 4 ? parsed * 1024 : parsed;
            return Math.max(256, Math.round(vcpu / 256) * 256);
        };
        const repoParts = (process.env.GITHUB_REPOSITORY ?? '').split('/');
        const containerPort = toNumber(props.containerPort, 3000);
        const containerCpu = toCpuUnits(props.containerCpu);
        const containerMemory = toNumber(props.containerMemory, 1024);
        const desiredCount = toNumber(props.desiredCount, 1);
        const nsName = props.serviceDiscoveryNamespaceName ?? 'mail.local';
        const nsTtl = cdk.Duration.seconds(toNumber(props.serviceDiscoveryTtl, 60));
        const ssmPrefixRaw = props.ssmPrefix ?? '/mail-example';
        const ssmPrefix = '/' + ssmPrefixRaw.split('/').filter(p => p).join('/');
        const gitHubOwner = props.gitHubOwner ?? (repoParts[0] || 'dyanet');
        const gitHubRepo = props.gitHubRepo ?? (repoParts[1] || 'imap');
        const gitHubBranch = props.gitHubBranch ?? process.env.GITHUB_REF_NAME ?? 'main';
        const publicEnvValue = props.publicEnvValue ?? 'production';
        const googleClientId = props.googleClientId || 'PLACEHOLDER_GOOGLE_CLIENT_ID';
        const googleClientSecret = props.googleClientSecret || 'PLACEHOLDER_GOOGLE_CLIENT_SECRET';
        const sessionSecretValue = props.sessionSecretValue || 'PLACEHOLDER_SESSION_SECRET';
        const apiDomain = props.apiCustomDomainName ?? process.env.API_CUSTOM_DOMAIN ?? 'mail.dyanet.com';
        const certArn = props.certificateArn ?? this.node.tryGetContext('certificateArn') ?? process.env.CERTIFICATE_ARN;
        const zoneId = props.hostedZoneId ?? '';
        const hasCustomDomain = Boolean(certArn && apiDomain);
        const hasHostedZone = Boolean(zoneId);
        const usePublicSubnets = props.publicSubnets && props.publicSubnets.length > 0;
        // VPC setup
        let vpc;
        let serviceSubnetIds;
        const useVpcParameter = this.node.tryGetContext('useVpcParameter');
        if (!useVpcParameter && this.account && this.region) {
            vpc = ec2.Vpc.fromLookup(this, 'MailVpc', { tags: { Name: 'dya-vpc' } });
            if (usePublicSubnets) {
                serviceSubnetIds = props.publicSubnets;
            }
            else if (props.privateSubnets && props.privateSubnets.length > 0) {
                serviceSubnetIds = props.privateSubnets;
            }
            else {
                const badAz = 'cac1-az4';
                let subnets = vpc.privateSubnets.filter(s => s.availabilityZone !== badAz);
                if (subnets.length === 0)
                    subnets = vpc.publicSubnets.filter(s => s.availabilityZone !== badAz);
                serviceSubnetIds = subnets.slice(0, 2).map(s => s.subnetId);
                if (serviceSubnetIds.length < 1)
                    throw new Error(`VPC must have at least one subnet in an allowed AZ.`);
            }
        }
        else {
            const vpcIdParam = new cdk.CfnParameter(this, 'VpcIdParam', { type: 'AWS::EC2::VPC::Id', default: props.vpcId ?? '' });
            const subnetParam = new cdk.CfnParameter(this, 'PrivateSubnetIdsParam', { type: 'CommaDelimitedList', default: props.privateSubnets?.join(',') ?? '' });
            vpc = ec2.Vpc.fromVpcAttributes(this, 'MailVpc', { vpcId: vpcIdParam.valueAsString, availabilityZones: cdk.Fn.getAzs(), privateSubnetIds: subnetParam.valueAsList });
            serviceSubnetIds = props.privateSubnets ?? subnetParam.valueAsList;
        }
        // Security Groups (L2)
        const apiVpcLinkSg = new ec2.SecurityGroup(this, 'ApiVpcLinkSecurityGroup', { vpc, description: 'Egress from API Gateway VPC Link', allowAllOutbound: false });
        apiVpcLinkSg.addEgressRule(ec2.Peer.anyIpv4(), ec2.Port.tcp(containerPort));
        const serviceSg = new ec2.SecurityGroup(this, 'ServiceSecurityGroup', { vpc, description: 'Allow traffic to Fargate tasks', allowAllOutbound: true });
        serviceSg.addIngressRule(ec2.Peer.anyIpv4(), ec2.Port.tcp(containerPort));
        // Log Group (L2)
        const appLogGroup = new logs.LogGroup(this, 'AppLogGroup', { logGroupName: '/ecs/mail-example', retention: logs.RetentionDays.ONE_MONTH, removalPolicy: cdk.RemovalPolicy.DESTROY });
        // ECS Cluster (L2)
        const cluster = new ecs.Cluster(this, 'MailCluster', { vpc, clusterName: 'public-cluster', enableFargateCapacityProviders: true });
        // ECR Repository - create if not exists using custom resource
        const ecrRepoName = 'mail-example';
        const checkEcrRepo = new cr.AwsCustomResource(this, 'CheckEcrRepo', {
            onCreate: { service: 'ECR', action: 'describeRepositories', parameters: { repositoryNames: [ecrRepoName] }, physicalResourceId: cr.PhysicalResourceId.of(ecrRepoName) },
            policy: cr.AwsCustomResourcePolicy.fromSdkCalls({ resources: cr.AwsCustomResourcePolicy.ANY_RESOURCE }),
        });
        const createEcrRepo = new cr.AwsCustomResource(this, 'CreateEcrRepo', {
            onCreate: { service: 'ECR', action: 'createRepository', parameters: { repositoryName: ecrRepoName, imageTagMutability: 'MUTABLE', encryptionConfiguration: { encryptionType: 'AES256' } }, physicalResourceId: cr.PhysicalResourceId.of(ecrRepoName), ignoreErrorCodesMatching: 'RepositoryAlreadyExistsException' },
            policy: cr.AwsCustomResourcePolicy.fromSdkCalls({ resources: cr.AwsCustomResourcePolicy.ANY_RESOURCE }),
        });
        createEcrRepo.node.addDependency(checkEcrRepo);
        const ecrRepo = ecr.Repository.fromRepositoryName(this, 'MailExampleRepositoryRef', ecrRepoName);
        // API Gateway HTTP API (L1 - no L2 for HTTP API with VPC Link)
        const httpApi = new apigatewayv2.CfnApi(this, 'MailHttpApi', { name: 'mail-example', protocolType: 'HTTP' });
        const apiStage = new apigatewayv2.CfnStage(this, 'MailApiStage', { stageName: 'prod', apiId: httpApi.ref, autoDeploy: true });
        const apiDomainName = hasCustomDomain ? new apigatewayv2.CfnDomainName(this, 'ApiDomainName', {
            domainName: apiDomain, domainNameConfigurations: [{ certificateArn: certArn, endpointType: 'REGIONAL', securityPolicy: 'TLS_1_2' }],
        }) : undefined;
        const apiMapping = hasCustomDomain && apiDomainName ? new apigatewayv2.CfnApiMapping(this, 'ApiMapping', {
            apiId: httpApi.ref, domainName: apiDomainName.ref, stage: apiStage.ref, apiMappingKey: 'examples',
        }) : undefined;
        if (apiMapping && apiDomainName) {
            apiMapping.addDependency(apiDomainName);
            apiMapping.addDependency(apiStage);
        }
        const apiRecord = hasCustomDomain && hasHostedZone && apiDomainName ? new route53.CfnRecordSet(this, 'ApiDomainRecord', {
            hostedZoneId: zoneId, name: apiDomain, type: 'A', aliasTarget: { dnsName: apiDomainName.attrRegionalDomainName, hostedZoneId: apiDomainName.attrRegionalHostedZoneId },
        }) : undefined;
        if (apiRecord && apiDomainName)
            apiRecord.addDependency(apiDomainName);
        const baseUrl = hasCustomDomain ? `https://${apiDomain}/examples/gmail-viewer` : cdk.Fn.join('', [httpApi.attrApiEndpoint, '/', apiStage.ref, '/gmail-viewer']);
        // Cloud Map Namespace (L2)
        const namespace = new servicediscovery.PrivateDnsNamespace(this, 'ServiceNamespace', { name: nsName, vpc, description: 'Namespace for mail services' });
        // VPC Link (L1)
        const vpcLink = new apigatewayv2.CfnVpcLink(this, 'ApiVpcLink', { name: 'mail-example-vpclink', subnetIds: serviceSubnetIds, securityGroupIds: [apiVpcLinkSg.securityGroupId] });
        // Cloud Map Service (L2)
        const cloudMapService = new servicediscovery.Service(this, 'AppCloudMapService', {
            name: 'mail-example', namespace, dnsRecordType: servicediscovery.DnsRecordType.SRV, dnsTtl: nsTtl, routingPolicy: servicediscovery.RoutingPolicy.WEIGHTED, customHealthCheck: { failureThreshold: 1 },
        });
        // Secrets Manager - single secret with GOOGLE_CLIENT_SECRET and SESSION_SECRET
        const appSecrets = new secretsmanager.Secret(this, 'AppSecrets', {
            secretName: `${ssmPrefix}/secrets`,
            description: 'Application secrets for mail-example',
            secretObjectValue: {
                GOOGLE_CLIENT_SECRET: cdk.SecretValue.unsafePlainText(googleClientSecret),
                SESSION_SECRET: cdk.SecretValue.unsafePlainText(sessionSecretValue),
            },
        });
        // IAM Roles (L2)
        const taskExecRole = new iam.Role(this, 'TaskExecutionRole', { assumedBy: new iam.ServicePrincipal('ecs-tasks.amazonaws.com'), managedPolicies: [iam.ManagedPolicy.fromAwsManagedPolicyName('service-role/AmazonECSTaskExecutionRolePolicy')] });
        taskExecRole.addToPolicy(new iam.PolicyStatement({ actions: ['ssm:GetParameter', 'ssm:GetParameters', 'ssm:GetParametersByPath', 'kms:Decrypt'], resources: [`arn:aws:ssm:${this.region}:${this.account}:parameter${ssmPrefix}*`, `arn:aws:kms:${this.region}:${this.account}:key/*`] }));
        taskExecRole.addToPolicy(new iam.PolicyStatement({ actions: ['secretsmanager:GetSecretValue'], resources: [appSecrets.secretArn] }));
        const taskRole = new iam.Role(this, 'TaskRole', { assumedBy: new iam.ServicePrincipal('ecs-tasks.amazonaws.com') });
        taskRole.addToPolicy(new iam.PolicyStatement({ actions: ['ssm:GetParameter', 'ssm:GetParameters', 'ssm:GetParametersByPath', 'kms:Decrypt'], resources: [`arn:aws:ssm:${this.region}:${this.account}:parameter${ssmPrefix}*`, `arn:aws:kms:${this.region}:${this.account}:key/*`] }));
        taskRole.addToPolicy(new iam.PolicyStatement({ actions: ['secretsmanager:GetSecretValue'], resources: [appSecrets.secretArn] }));
        // SSM Parameters (L2) - create before task definition so they can be referenced
        const ssmBaseUrl = new ssm.StringParameter(this, 'SsmBaseUrl', { parameterName: `${ssmPrefix}/env/BASE_URL`, stringValue: baseUrl.toString() });
        const ssmGoogleClientId = new ssm.StringParameter(this, 'SsmGoogleClientId', { parameterName: `${ssmPrefix}/env/GOOGLE_CLIENT_ID`, stringValue: googleClientId });
        new ssm.StringParameter(this, 'SsmPort', { parameterName: `${ssmPrefix}/env/PORT`, stringValue: containerPort.toString() });
        new ssm.StringParameter(this, 'SsmPublicEnv', { parameterName: `${ssmPrefix}/env/NODE_ENV`, stringValue: publicEnvValue });
        // ECS Task Definition (L2)
        const taskDef = new ecs.FargateTaskDefinition(this, 'AppTaskDefinition', { family: 'mail-example', cpu: containerCpu, memoryLimitMiB: containerMemory, executionRole: taskExecRole, taskRole });
        taskDef.addContainer('mail-example', {
            image: ecs.ContainerImage.fromEcrRepository(ecrRepo, 'latest'), portMappings: [{ containerPort }],
            logging: ecs.LogDrivers.awsLogs({ logGroup: appLogGroup, streamPrefix: 'mail-example' }),
            environment: { CONFIG_SSM_PREFIX: ssmPrefix, PORT: containerPort.toString(), BASE_URL: baseUrl.toString(), NODE_ENV: publicEnvValue },
            secrets: {
                GOOGLE_CLIENT_ID: ecs.Secret.fromSsmParameter(ssmGoogleClientId),
                GOOGLE_CLIENT_SECRET: ecs.Secret.fromSecretsManager(appSecrets, 'GOOGLE_CLIENT_SECRET'),
                SESSION_SECRET: ecs.Secret.fromSecretsManager(appSecrets, 'SESSION_SECRET'),
            },
        });
        // ECS Service (L2) - associate with standalone Cloud Map service for API Gateway integration
        const service = new ecs.FargateService(this, 'AppService', {
            serviceName: 'mail-example', cluster, taskDefinition: taskDef, desiredCount,
            capacityProviderStrategies: [{ capacityProvider: 'FARGATE_SPOT', weight: 4 }, { capacityProvider: 'FARGATE', weight: 1 }],
            vpcSubnets: { subnets: serviceSubnetIds.map((id, i) => ec2.Subnet.fromSubnetId(this, `ServiceSubnet${i}`, id)) },
            securityGroups: [serviceSg], assignPublicIp: usePublicSubnets ?? false, minHealthyPercent: 50, maxHealthyPercent: 200,
        });
        service.associateCloudMapService({ service: cloudMapService, containerPort, container: taskDef.defaultContainer });
        // API Gateway Integration (L1)
        const integration = new apigatewayv2.CfnIntegration(this, 'MailIntegration', { apiId: httpApi.ref, integrationType: 'HTTP_PROXY', integrationMethod: 'ANY', integrationUri: cloudMapService.serviceArn, connectionType: 'VPC_LINK', connectionId: vpcLink.ref, payloadFormatVersion: '1.0' });
        new apigatewayv2.CfnRoute(this, 'GmailViewerRoute', { apiId: httpApi.ref, routeKey: 'ANY /gmail-viewer', target: `integrations/${integration.ref}` });
        new apigatewayv2.CfnRoute(this, 'GmailViewerProxyRoute', { apiId: httpApi.ref, routeKey: 'ANY /gmail-viewer/{proxy+}', target: `integrations/${integration.ref}` });
        // CodeBuild Role (L2)
        const buildRole = new iam.Role(this, 'CodeBuildRole', { assumedBy: new iam.ServicePrincipal('codebuild.amazonaws.com') });
        buildRole.addToPolicy(new iam.PolicyStatement({ actions: ['logs:CreateLogGroup', 'logs:CreateLogStream', 'logs:PutLogEvents'], resources: ['*'] }));
        buildRole.addToPolicy(new iam.PolicyStatement({ actions: ['ecr:GetAuthorizationToken', 'ecr:BatchCheckLayerAvailability', 'ecr:CompleteLayerUpload', 'ecr:BatchGetImage', 'ecr:DescribeRepositories', 'ecr:InitiateLayerUpload', 'ecr:PutImage', 'ecr:UploadLayerPart'], resources: ['*'] }));
        buildRole.addToPolicy(new iam.PolicyStatement({ actions: ['ecs:UpdateService', 'ecs:DescribeServices', 'ecs:DescribeClusters'], resources: ['*'] }));
        buildRole.addToPolicy(new iam.PolicyStatement({ actions: ['ssm:GetParameter', 'ssm:GetParameters', 'ssm:GetParametersByPath'], resources: ['*'] }));
        if (props.codeConnectionArn)
            buildRole.addToPolicy(new iam.PolicyStatement({ actions: ['codeconnections:GetConnection', 'codeconnections:GetConnectionToken', 'codeconnections:UseConnection'], resources: [props.codeConnectionArn] }));
        // CodeBuild Project (L2)
        new codebuild.Project(this, 'CodeBuildProject', {
            projectName: 'mail-example', role: buildRole,
            environment: { buildImage: codebuild.LinuxBuildImage.STANDARD_7_0, computeType: codebuild.ComputeType.SMALL, privileged: true, environmentVariables: { ECR_URI: { value: ecrRepo.repositoryUri }, CLUSTER_NAME: { value: cluster.clusterName }, SERVICE_NAME: { value: 'mail-example' } } },
            source: codebuild.Source.gitHub({ owner: gitHubOwner, repo: gitHubRepo, branchOrRef: gitHubBranch }),
            timeout: cdk.Duration.minutes(30), queuedTimeout: cdk.Duration.minutes(30), badge: true, description: 'Build & deploy mail-example to ECR then force ECS deploy',
            buildSpec: codebuild.BuildSpec.fromObject({
                version: '0.2',
                phases: {
                    pre_build: { commands: ['echo "Logging in to ECR"', 'aws ecr get-login-password --region $AWS_DEFAULT_REGION | docker login --username AWS --password-stdin $ECR_URI', 'IMAGE_TAG=${CODEBUILD_RESOLVED_SOURCE_VERSION:-latest}'] },
                    build: { commands: ['cd examples/gmail-viewer', 'docker build -t $ECR_URI:latest -t $ECR_URI:$IMAGE_TAG .'] },
                    post_build: { commands: ['docker push $ECR_URI:latest', 'docker push $ECR_URI:$IMAGE_TAG', 'aws ecs update-service --cluster $CLUSTER_NAME --service $SERVICE_NAME --force-new-deployment'] },
                },
                artifacts: { files: [] }, env: { shell: 'bash' },
            }),
        });
        // Outputs
        this.clusterName = cluster.clusterName;
        new cdk.CfnOutput(this, 'ClusterName', { value: this.clusterName });
        this.repositoryUri = ecrRepo.repositoryUri;
        new cdk.CfnOutput(this, 'RepositoryUri', { value: this.repositoryUri });
        this.apiInvokeUrl = baseUrl.toString();
        new cdk.CfnOutput(this, 'ApiInvokeUrl', { value: this.apiInvokeUrl });
        this.cloudMapServiceArn = cloudMapService.serviceArn;
        new cdk.CfnOutput(this, 'CloudMapServiceArn', { value: this.cloudMapServiceArn });
    }
}
exports.GmailViewerCdkStack = GmailViewerCdkStack;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ21haWwtdmlld2VyLWNkay1zdGFjay5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImdtYWlsLXZpZXdlci1jZGstc3RhY2sudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUEsaURBQW1DO0FBQ25DLDJFQUE2RDtBQUM3RCxxRUFBdUQ7QUFDdkQsaUVBQW1EO0FBQ25ELHlEQUEyQztBQUMzQyx5REFBMkM7QUFDM0MseURBQTJDO0FBQzNDLHlEQUEyQztBQUMzQywyREFBNkM7QUFDN0MsaUVBQW1EO0FBQ25ELG1GQUFxRTtBQUNyRSwrRUFBaUU7QUFDakUseURBQTJDO0FBMkIzQyxNQUFhLG1CQUFvQixTQUFRLEdBQUcsQ0FBQyxLQUFLO0lBQ2hDLFdBQVcsQ0FBUztJQUNwQixhQUFhLENBQVM7SUFDdEIsWUFBWSxDQUFTO0lBQ3JCLGtCQUFrQixDQUFTO0lBRTNDLFlBQW1CLEtBQWMsRUFBRSxFQUFVLEVBQUUsS0FBK0I7UUFDNUUsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLEVBQUUsS0FBSyxDQUFDLENBQUM7UUFFeEIsTUFBTSxRQUFRLEdBQUcsQ0FBQyxLQUFrQyxFQUFFLFFBQWdCLEVBQVUsRUFBRTtZQUNoRixNQUFNLFNBQVMsR0FBRyxLQUFLLElBQUksUUFBUSxDQUFDO1lBQ3BDLE1BQU0sTUFBTSxHQUFHLE9BQU8sU0FBUyxLQUFLLFFBQVEsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7WUFDN0UsT0FBTyxNQUFNLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQztRQUNyRCxDQUFDLENBQUM7UUFDRixNQUFNLFVBQVUsR0FBRyxDQUFDLEtBQWtDLEVBQVUsRUFBRTtZQUNoRSxNQUFNLE1BQU0sR0FBRyxRQUFRLENBQUMsS0FBSyxF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VixJQUFJLENBQUMsV0FBVyxHQUFHLE9BQU8sQ0FBQyxXQUFXLENBQUM7UUFDdkMsSUFBSSxHQUFHLENBQUMsU0FBUyxDQUFDLElBQUksRUFBRSxhQUFhLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLFdBQVcsRUFBRSxDQUFDLENBQUM7UUFDcEUsSUFBSSxDQUFDLGFBQWEsR0FBRyxPQUFPLENBQUMsYUFBYSxDQUFDO1FBQzNDLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsZUFBZSxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxhQUFhLEVBQUUsQ0FBQyxDQUFDO1FBQ3hFLElBQUksQ0FBQyxZQUFZLEdBQUcsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ3ZDLElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsY0FBYyxFQUFFLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxZQUFZLEVBQUUsQ0FBQyxDQUFDO1FBQ3RFLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxlQUFlLENBQUMsVUFBVSxDQUFDO1FBQ3JELElBQUksR0FBRyxDQUFDLFNBQVMsQ0FBQyxJQUFJLEVBQUUsb0JBQW9CLEVBQUUsRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUMsQ0FBQztJQUNwRixDQUFDO0NBQ0Y7QUFyTkQsa0RBcU5DIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0ICogYXMgY2RrIGZyb20gJ2F3cy1jZGstbGliJztcclxuaW1wb3J0ICogYXMgYXBpZ2F0ZXdheXYyIGZyb20gJ2F3cy1jZGstbGliL2F3cy1hcGlnYXRld2F5djInO1xyXG5pbXBvcnQgKiBhcyBjb2RlYnVpbGQgZnJvbSAnYXdzLWNkay1saWIvYXdzLWNvZGVidWlsZCc7XHJcbmltcG9ydCAqIGFzIGNyIGZyb20gJ2F3cy1jZGstbGliL2N1c3RvbS1yZXNvdXJjZXMnO1xyXG5pbXBvcnQgKiBhcyBlYzIgZnJvbSAnYXdzLWNkay1saWIvYXdzLWVjMic7XHJcbmltcG9ydCAqIGFzIGVjciBmcm9tICdhd3MtY2RrLWxpYi9hd3MtZWNyJztcclxuaW1wb3J0ICogYXMgZWNzIGZyb20gJ2F3cy1jZGstbGliL2F3cy1lY3MnO1xyXG5pbXBvcnQgKiBhcyBpYW0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWlhbSc7XHJcbmltcG9ydCAqIGFzIGxvZ3MgZnJvbSAnYXdzLWNkay1saWIvYXdzLWxvZ3MnO1xyXG5pbXBvcnQgKiBhcyByb3V0ZTUzIGZyb20gJ2F3cy1jZGstbGliL2F3cy1yb3V0ZTUzJztcclxuaW1wb3J0ICogYXMgc2VydmljZWRpc2NvdmVyeSBmcm9tICdhd3MtY2RrLWxpYi9hd3Mtc2VydmljZWRpc2NvdmVyeSc7XHJcbmltcG9ydCAqIGFzIHNlY3JldHNtYW5hZ2VyIGZyb20gJ2F3cy1jZGstbGliL2F3cy1zZWNyZXRzbWFuYWdlcic7XHJcbmltcG9ydCAqIGFzIHNzbSBmcm9tICdhd3MtY2RrLWxpYi9hd3Mtc3NtJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgR21haWxWaWV3ZXJDZGtTdGFja1Byb3BzIGV4dGVuZHMgY2RrLlN0YWNrUHJvcHMge1xyXG4gIHJlYWRvbmx5IHZwY0lkPzogc3RyaW5nO1xyXG4gIHJlYWRvbmx5IHByaXZhdGVTdWJuZXRzPzogc3RyaW5nW107XHJcbiAgcmVhZG9ubHkgcHVibGljU3VibmV0cz86IHN0cmluZ1tdO1xyXG4gIHJlYWRvbmx5IGNvbnRhaW5lclBvcnQ/OiBudW1iZXIgfCBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgY29udGFpbmVyQ3B1PzogbnVtYmVyIHwgc3RyaW5nO1xyXG4gIHJlYWRvbmx5IGNvbnRhaW5lck1lbW9yeT86IG51bWJlciB8IHN0cmluZztcclxuICByZWFkb25seSBkZXNpcmVkQ291bnQ/OiBudW1iZXIgfCBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgY2VydGlmaWNhdGVBcm4/OiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgYXBpQ3VzdG9tRG9tYWluTmFtZT86IHN0cmluZztcclxuICByZWFkb25seSBob3N0ZWRab25lSWQ/OiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgc2VydmljZURpc2NvdmVyeU5hbWVzcGFjZU5hbWU/OiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgc2VydmljZURpc2NvdmVyeVR0bD86IG51bWJlciB8IHN0cmluZztcclxuICByZWFkb25seSBzc21QcmVmaXg/OiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgZ2l0SHViT3duZXI/OiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgZ2l0SHViUmVwbz86IHN0cmluZztcclxuICByZWFkb25seSBnaXRIdWJCcmFuY2g/OiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgcHVibGljRW52VmFsdWU/OiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgZ29vZ2xlQ2xpZW50SWQ/OiBzdHJpbmc7XHJcbiAgcmVhZG9ubHkgZ29vZ2xlQ2xpZW50U2VjcmV0Pzogc3RyaW5nO1xyXG4gIHJlYWRvbmx5IHNlc3Npb25TZWNyZXRWYWx1ZT86IHN0cmluZztcclxuICByZWFkb25seSB1c2VHaXRIdWJXZWJob29rcz86IGJvb2xlYW47XHJcbiAgcmVhZG9ubHkgY29kZUNvbm5lY3Rpb25Bcm4/OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBHbWFpbFZpZXdlckNka1N0YWNrIGV4dGVuZHMgY2RrLlN0YWNrIHtcclxuICBwdWJsaWMgcmVhZG9ubHkgY2x1c3Rlck5hbWU6IHN0cmluZztcclxuICBwdWJsaWMgcmVhZG9ubHkgcmVwb3NpdG9yeVVyaTogc3RyaW5nO1xyXG4gIHB1YmxpYyByZWFkb25seSBhcGlJbnZva2VVcmw6IHN0cmluZztcclxuICBwdWJsaWMgcmVhZG9ubHkgY2xvdWRNYXBTZXJ2aWNlQXJuOiBzdHJpbmc7XHJcblxyXG4gIHB1YmxpYyBjb25zdHJ1Y3RvcihzY29wZTogY2RrLkFwcCwgaWQ6IHN0cmluZywgcHJvcHM6IEdtYWlsVmlld2VyQ2RrU3RhY2tQcm9wcykge1xyXG4gICAgc3VwZXIoc2NvcGUsIGlkLCBwcm9wcyk7XHJcblxyXG4gICAgY29uc3QgdG9OdW1iZXIgPSAodmFsdWU6IHN0cmluZyB8IG51bWJlciB8IHVuZGVmaW5lZCwgZmFsbGJhY2s6IG51bWJlcik6IG51bWJlciA9PiB7XHJcbiAgICAgIGNvbnN0IGNhbmRpZGF0ZSA9IHZhbHVlID8/IGZhbGxiYWNrO1xyXG4gICAgICBjb25zdCBwYXJzZWQgPSB0eXBlb2YgY2FuZGlkYXRlID09PSAnbnVtYmVyJyA/IGNhbmRpZGF0ZSA6IE51bWJlcihjYW5kaWRhdGUpO1xyXG4gICAgICByZXR1cm4gTnVtYmVyLmlzRmluaXRlKHBhcnNlZCkgPyBwYXJzZWQgOiBmYWxsYmFjaztcclxuICAgIH07XHJcbiAgICBjb25zdCB0b0NwdVVuaXRzID0gKHZhbHVlOiBzdHJpbmcgfCBudW1iZXIgfCB1bmRlZmluZWQpOiBudW1iZXIgPT4ge1xyXG4gICAgICBjb25zdCBwYXJzZWQgPSB0b051bWJlcih2YWx1ZSwgMC41KTtcclxuICAgICAgY29uc3QgdmNwdSA9IHBhcnNlZCA8PSA0ID8gcGFyc2VkICogMTAyNCA6IHBhcnNlZDtcclxuICAgICAgcmV0dXJuIE1hdGgubWF4KDI1NiwgTWF0aC5yb3VuZCh2Y3B1IC8gMjU2KSAqIDI1Nik7XHJcbiAgICB9O1xyXG5cclxuICAgIGNvbnN0IHJlcG9QYXJ0cyA9IChwcm9jZXNzLmVudi5HSVRIVUJfUkVQT1NJVE9SWSA/PyAnJykuc3BsaXQoJy8nKTtcclxuICAgIGNvbnN0IGNvbnRhaW5lclBvcnQgPSB0b051bWJlcihwcm9wcy5jb250YWluZXJQb3J0LCAzMDAwKTtcclxuICAgIGNvbnN0IGNvbnRhaW5lckNwdSA9IHRvQ3B1VW5pdHMocHJvcHMuY29udGFpbmVyQ3B1KTtcclxuICAgIGNvbnN0IGNvbnRhaW5lck1lbW9yeSA9IHRvTnVtYmVyKHByb3BzLmNvbnRhaW5lck1lbW9yeSwgMTAyNCk7XHJcbiAgICBjb25zdCBkZXNpcmVkQ291bnQgPSB0b051bWJlcihwcm9wcy5kZXNpcmVkQ291bnQsIDEpO1xyXG4gICAgY29uc3QgbnNOYW1lID0gcHJvcHMuc2VydmljZURpc2NvdmVyeU5hbWVzcGFjZU5hbWUgPz8gJ21haWwubG9jYWwnO1xyXG4gICAgY29uc3QgbnNUdGwgPSBjZGsuRHVyYXRpb24uc2Vjb25kcyh0b051bWJlcihwcm9wcy5zZXJ2aWNlRGlzY292ZXJ5VHRsLCA2MCkpO1xyXG4gICAgY29uc3Qgc3NtUHJlZml4UmF3ID0gcHJvcHMuc3NtUHJlZml4ID8/ICcvbWFpbC1leGFtcGxlJztcclxuICAgIGNvbnN0IHNzbVByZWZpeCA9ICcvJyArIHNzbVByZWZpeFJhdy5zcGxpdCgnLycpLmZpbHRlcihwID0+IHApLmpvaW4oJy8nKTtcclxuICAgIGNvbnN0IGdpdEh1Yk93bmVyID0gcHJvcHMuZ2l0SHViT3duZXIgPz8gKHJlcG9QYXJ0c1swXSB8fCAnZHlhbmV0Jyk7XHJcbiAgICBjb25zdCBnaXRIdWJSZXBvID0gcHJvcHMuZ2l0SHViUmVwbyA/PyAocmVwb1BhcnRzWzFdIHx8ICdpbWFwJyk7XHJcbiAgICBjb25zdCBnaXRIdWJCcmFuY2ggPSBwcm9wcy5naXRIdWJCcmFuY2ggPz8gcHJvY2Vzcy5lbnYuR0lUSFVCX1JFRl9OQU1FID8/ICdtYWluJztcclxuICAgIGNvbnN0IHB1YmxpY0VudlZhbHVlID0gcHJvcHMucHVibGljRW52VmFsdWUgPz8gJ3Byb2R1Y3Rpb24nO1xyXG4gICAgY29uc3QgZ29vZ2xlQ2xpZW50SWQgPSBwcm9wcy5nb29nbGVDbGllbnRJZCB8fCAnUExBQ0VIT0xERVJfR09PR0xFX0NMSUVOVF9JRCc7XHJcbiAgICBjb25zdCBnb29nbGVDbGllbnRTZWNyZXQgPSBwcm9wcy5nb29nbGVDbGllbnRTZWNyZXQgfHwgJ1BMQUNFSE9MREVSX0dPT0dMRV9DTElFTlRfU0VDUkVUJztcclxuICAgIGNvbnN0IHNlc3Npb25TZWNyZXRWYWx1ZSA9IHByb3BzLnNlc3Npb25TZWNyZXRWYWx1ZSB8fCAnUExBQ0VIT0xERVJfU0VTU0lPTl9TRUNSRVQnO1xyXG4gICAgY29uc3QgYXBpRG9tYWluID0gcHJvcHMuYXBpQ3VzdG9tRG9tYWluTmFtZSA/PyBwcm9jZXNzLmVudi5BUElfQ1VTVE9NX0RPTUFJTiA/PyAnbWFpbC5keWFuZXQuY29tJztcclxuICAgIGNvbnN0IGNlcnRBcm4gPSBwcm9wcy5jZXJ0aWZpY2F0ZUFybiA/PyB0aGlzLm5vZGUudHJ5R2V0Q29udGV4dCgnY2VydGlmaWNhdGVBcm4nKSA/PyBwcm9jZXNzLmVudi5DRVJUSUZJQ0FURV9BUk47XHJcbiAgICBjb25zdCB6b25lSWQgPSBwcm9wcy5ob3N0ZWRab25lSWQgPz8gJyc7XHJcbiAgICBjb25zdCBoYXNDdXN0b21Eb21haW4gPSBCb29sZWFuKGNlcnRBcm4gJiYgYXBpRG9tYWluKTtcclxuICAgIGNvbnN0IGhhc0hvc3RlZFpvbmUgPSBCb29sZWFuKHpvbmVJZCk7XHJcbiAgICBjb25zdCB1c2VQdWJsaWNTdWJuZXRzID0gcHJvcHMucHVibGljU3VibmV0cyAmJiBwcm9wcy5wdWJsaWNTdWJuZXRzLmxlbmd0aCA+IDA7XHJcblxyXG4gICAgLy8gVlBDIHNldHVwXHJcbiAgICBsZXQgdnBjOiBlYzIuSVZwYztcclxuICAgIGxldCBzZXJ2aWNlU3VibmV0SWRzOiBzdHJpbmdbXTtcclxuICAgIGNvbnN0IHVzZVZwY1BhcmFtZXRlciA9IHRoaXMubm9kZS50cnlHZXRDb250ZXh0KCd1c2VWcGNQYXJhbWV0ZXInKTtcclxuXHJcbiAgICBpZiAoIXVzZVZwY1BhcmFtZXRlciAmJiB0aGlzLmFjY291bnQgJiYgdGhpcy5yZWdpb24pIHtcclxuICAgICAgdnBjID0gZWMyLlZwYy5mcm9tTG9va3VwKHRoaXMsICdNYWlsVnBjJywgeyB0YWdzOiB7IE5hbWU6ICdkeWEtdnBjJyB9IH0pO1xyXG4gICAgICBpZiAodXNlUHVibGljU3VibmV0cykge1xyXG4gICAgICAgIHNlcnZpY2VTdWJuZXRJZHMgPSBwcm9wcy5wdWJsaWNTdWJuZXRzITtcclxuICAgICAgfSBlbHNlIGlmIChwcm9wcy5wcml2YXRlU3VibmV0cyAmJiBwcm9wcy5wcml2YXRlU3VibmV0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgc2VydmljZVN1Ym5ldElkcyA9IHByb3BzLnByaXZhdGVTdWJuZXRzO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbnN0IGJhZEF6ID0gJ2NhYzEtYXo0JztcclxuICAgICAgICBsZXQgc3VibmV0cyA9IHZwYy5wcml2YXRlU3VibmV0cy5maWx0ZXIocyA9PiBzLmF2YWlsYWJpbGl0eVpvbmUgIT09IGJhZEF6KTtcclxuICAgICAgICBpZiAoc3VibmV0cy5sZW5ndGggPT09IDApIHN1Ym5ldHMgPSB2cGMucHVibGljU3VibmV0cy5maWx0ZXIocyA9PiBzLmF2YWlsYWJpbGl0eVpvbmUgIT09IGJhZEF6KTtcclxuICAgICAgICBzZXJ2aWNlU3VibmV0SWRzID0gc3VibmV0cy5zbGljZSgwLCAyKS5tYXAocyA9PiBzLnN1Ym5ldElkKTtcclxuICAgICAgICBpZiAoc2VydmljZVN1Ym5ldElkcy5sZW5ndGggPCAxKSB0aHJvdyBuZXcgRXJyb3IoYFZQQyBtdXN0IGhhdmUgYXQgbGVhc3Qgb25lIHN1Ym5ldCBpbiBhbiBhbGxvd2VkIEFaLmApO1xyXG4gICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zdCB2cGNJZFBhcmFtID0gbmV3IGNkay5DZm5QYXJhbWV0ZXIodGhpcywgJ1ZwY0lkUGFyYW0nLCB7IHR5cGU6ICdBV1M6OkVDMjo6VlBDOjpJZCcsIGRlZmF1bHQ6IHByb3BzLnZwY0lkID8/ICcnIH0pO1xyXG4gICAgICBjb25zdCBzdWJuZXRQYXJhbSA9IG5ldyBjZGsuQ2ZuUGFyYW1ldGVyKHRoaXMsICdQcml2YXRlU3VibmV0SWRzUGFyYW0nLCB7IHR5cGU6ICdDb21tYURlbGltaXRlZExpc3QnLCBkZWZhdWx0OiBwcm9wcy5wcml2YXRlU3VibmV0cz8uam9pbignLCcpID8/ICcnIH0pO1xyXG4gICAgICB2cGMgPSBlYzIuVnBjLmZyb21WcGNBdHRyaWJ1dGVzKHRoaXMsICdNYWlsVnBjJywgeyB2cGNJZDogdnBjSWRQYXJhbS52YWx1ZUFzU3RyaW5nLCBhdmFpbGFiaWxpdHlab25lczogY2RrLkZuLmdldEF6cygpLCBwcml2YXRlU3VibmV0SWRzOiBzdWJuZXRQYXJhbS52YWx1ZUFzTGlzdCB9KTtcclxuICAgICAgc2VydmljZVN1Ym5ldElkcyA9IHByb3BzLnByaXZhdGVTdWJuZXRzID8/IHN1Ym5ldFBhcmFtLnZhbHVlQXNMaXN0O1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFNlY3VyaXR5IEdyb3VwcyAoTDIpXHJcbiAgICBjb25zdCBhcGlWcGNMaW5rU2cgPSBuZXcgZWMyLlNlY3VyaXR5R3JvdXAodGhpcywgJ0FwaVZwY0xpbmtTZWN1cml0eUdyb3VwJywgeyB2cGMsIGRlc2NyaXB0aW9uOiAnRWdyZXNzIGZyb20gQVBJIEdhdGV3YXkgVlBDIExpbmsnLCBhbGxvd0FsbE91dGJvdW5kOiBmYWxzZSB9KTtcclxuICAgIGFwaVZwY0xpbmtTZy5hZGRFZ3Jlc3NSdWxlKGVjMi5QZWVyLmFueUlwdjQoKSwgZWMyLlBvcnQudGNwKGNvbnRhaW5lclBvcnQpKTtcclxuXHJcbiAgICBjb25zdCBzZXJ2aWNlU2cgPSBuZXcgZWMyLlNlY3VyaXR5R3JvdXAodGhpcywgJ1NlcnZpY2VTZWN1cml0eUdyb3VwJywgeyB2cGMsIGRlc2NyaXB0aW9uOiAnQWxsb3cgdHJhZmZpYyB0byBGYXJnYXRlIHRhc2tzJywgYWxsb3dBbGxPdXRib3VuZDogdHJ1ZSB9KTtcclxuICAgIHNlcnZpY2VTZy5hZGRJbmdyZXNzUnVsZShlYzIuUGVlci5hbnlJcHY0KCksIGVjMi5Qb3J0LnRjcChjb250YWluZXJQb3J0KSk7XHJcblxyXG4gICAgLy8gTG9nIEdyb3VwIChMMilcclxuICAgIGNvbnN0IGFwcExvZ0dyb3VwID0gbmV3IGxvZ3MuTG9nR3JvdXAodGhpcywgJ0FwcExvZ0dyb3VwJywgeyBsb2dHcm91cE5hbWU6ICcvZWNzL21haWwtZXhhbXBsZScsIHJldGVudGlvbjogbG9ncy5SZXRlbnRpb25EYXlzLk9ORV9NT05USCwgcmVtb3ZhbFBvbGljeTogY2RrLlJlbW92YWxQb2xpY3kuREVTVFJPWSB9KTtcclxuXHJcbiAgICAvLyBFQ1MgQ2x1c3RlciAoTDIpXHJcbiAgICBjb25zdCBjbHVzdGVyID0gbmV3IGVjcy5DbHVzdGVyKHRoaXMsICdNYWlsQ2x1c3RlcicsIHsgdnBjLCBjbHVzdGVyTmFtZTogJ3B1YmxpYy1jbHVzdGVyJywgZW5hYmxlRmFyZ2F0ZUNhcGFjaXR5UHJvdmlkZXJzOiB0cnVlIH0pO1xyXG5cclxuXHJcbiAgICAvLyBFQ1IgUmVwb3NpdG9yeSAtIGNyZWF0ZSBpZiBub3QgZXhpc3RzIHVzaW5nIGN1c3RvbSByZXNvdXJjZVxyXG4gICAgY29uc3QgZWNyUmVwb05hbWUgPSAnbWFpbC1leGFtcGxlJztcclxuICAgIGNvbnN0IGNoZWNrRWNyUmVwbyA9IG5ldyBjci5Bd3NDdXN0b21SZXNvdXJjZSh0aGlzLCAnQ2hlY2tFY3JSZXBvJywge1xyXG4gICAgICBvbkNyZWF0ZTogeyBzZXJ2aWNlOiAnRUNSJywgYWN0aW9uOiAnZGVzY3JpYmVSZXBvc2l0b3JpZXMnLCBwYXJhbWV0ZXJzOiB7IHJlcG9zaXRvcnlOYW1lczogW2VjclJlcG9OYW1lXSB9LCBwaHlzaWNhbFJlc291cmNlSWQ6IGNyLlBoeXNpY2FsUmVzb3VyY2VJZC5vZihlY3JSZXBvTmFtZSkgfSxcclxuICAgICAgcG9saWN5OiBjci5Bd3NDdXN0b21SZXNvdXJjZVBvbGljeS5mcm9tU2RrQ2FsbHMoeyByZXNvdXJjZXM6IGNyLkF3c0N1c3RvbVJlc291cmNlUG9saWN5LkFOWV9SRVNPVVJDRSB9KSxcclxuICAgIH0pO1xyXG4gICAgY29uc3QgY3JlYXRlRWNyUmVwbyA9IG5ldyBjci5Bd3NDdXN0b21SZXNvdXJjZSh0aGlzLCAnQ3JlYXRlRWNyUmVwbycsIHtcclxuICAgICAgb25DcmVhdGU6IHsgc2VydmljZTogJ0VDUicsIGFjdGlvbjogJ2NyZWF0ZVJlcG9zaXRvcnknLCBwYXJhbWV0ZXJzOiB7IHJlcG9zaXRvcnlOYW1lOiBlY3JSZXBvTmFtZSwgaW1hZ2VUYWdNdXRhYmlsaXR5OiAnTVVUQUJMRScsIGVuY3J5cHRpb25Db25maWd1cmF0aW9uOiB7IGVuY3J5cHRpb25UeXBlOiAnQUVTMjU2JyB9IH0sIHBoeXNpY2FsUmVzb3VyY2VJZDogY3IuUGh5c2ljYWxSZXNvdXJjZUlkLm9mKGVjclJlcG9OYW1lKSwgaWdub3JlRXJyb3JDb2Rlc01hdGNoaW5nOiAnUmVwb3NpdG9yeUFscmVhZHlFeGlzdHNFeGNlcHRpb24nIH0sXHJcbiAgICAgIHBvbGljeTogY3IuQXdzQ3VzdG9tUmVzb3VyY2VQb2xpY3kuZnJvbVNka0NhbGxzKHsgcmVzb3VyY2VzOiBjci5Bd3NDdXN0b21SZXNvdXJjZVBvbGljeS5BTllfUkVTT1VSQ0UgfSksXHJcbiAgICB9KTtcclxuICAgIGNyZWF0ZUVjclJlcG8ubm9kZS5hZGREZXBlbmRlbmN5KGNoZWNrRWNyUmVwbyk7XHJcbiAgICBjb25zdCBlY3JSZXBvID0gZWNyLlJlcG9zaXRvcnkuZnJvbVJlcG9zaXRvcnlOYW1lKHRoaXMsICdNYWlsRXhhbXBsZVJlcG9zaXRvcnlSZWYnLCBlY3JSZXBvTmFtZSk7XHJcblxyXG4gICAgLy8gQVBJIEdhdGV3YXkgSFRUUCBBUEkgKEwxIC0gbm8gTDIgZm9yIEhUVFAgQVBJIHdpdGggVlBDIExpbmspXHJcbiAgICBjb25zdCBodHRwQXBpID0gbmV3IGFwaWdhdGV3YXl2Mi5DZm5BcGkodGhpcywgJ01haWxIdHRwQXBpJywgeyBuYW1lOiAnbWFpbC1leGFtcGxlJywgcHJvdG9jb2xUeXBlOiAnSFRUUCcgfSk7XHJcbiAgICBjb25zdCBhcGlTdGFnZSA9IG5ldyBhcGlnYXRld2F5djIuQ2ZuU3RhZ2UodGhpcywgJ01haWxBcGlTdGFnZScsIHsgc3RhZ2VOYW1lOiAncHJvZCcsIGFwaUlkOiBodHRwQXBpLnJlZiwgYXV0b0RlcGxveTogdHJ1ZSB9KTtcclxuXHJcbiAgICBjb25zdCBhcGlEb21haW5OYW1lID0gaGFzQ3VzdG9tRG9tYWluID8gbmV3IGFwaWdhdGV3YXl2Mi5DZm5Eb21haW5OYW1lKHRoaXMsICdBcGlEb21haW5OYW1lJywge1xyXG4gICAgICBkb21haW5OYW1lOiBhcGlEb21haW4sIGRvbWFpbk5hbWVDb25maWd1cmF0aW9uczogW3sgY2VydGlmaWNhdGVBcm46IGNlcnRBcm4hLCBlbmRwb2ludFR5cGU6ICdSRUdJT05BTCcsIHNlY3VyaXR5UG9saWN5OiAnVExTXzFfMicgfV0sXHJcbiAgICB9KSA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICBjb25zdCBhcGlNYXBwaW5nID0gaGFzQ3VzdG9tRG9tYWluICYmIGFwaURvbWFpbk5hbWUgPyBuZXcgYXBpZ2F0ZXdheXYyLkNmbkFwaU1hcHBpbmcodGhpcywgJ0FwaU1hcHBpbmcnLCB7XHJcbiAgICAgIGFwaUlkOiBodHRwQXBpLnJlZiwgZG9tYWluTmFtZTogYXBpRG9tYWluTmFtZS5yZWYsIHN0YWdlOiBhcGlTdGFnZS5yZWYsIGFwaU1hcHBpbmdLZXk6ICdleGFtcGxlcycsXHJcbiAgICB9KSA6IHVuZGVmaW5lZDtcclxuICAgIGlmIChhcGlNYXBwaW5nICYmIGFwaURvbWFpbk5hbWUpIHsgYXBpTWFwcGluZy5hZGREZXBlbmRlbmN5KGFwaURvbWFpbk5hbWUpOyBhcGlNYXBwaW5nLmFkZERlcGVuZGVuY3koYXBpU3RhZ2UpOyB9XHJcblxyXG4gICAgY29uc3QgYXBpUmVjb3JkID0gaGFzQ3VzdG9tRG9tYWluICYmIGhhc0hvc3RlZFpvbmUgJiYgYXBpRG9tYWluTmFtZSA/IG5ldyByb3V0ZTUzLkNmblJlY29yZFNldCh0aGlzLCAnQXBpRG9tYWluUmVjb3JkJywge1xyXG4gICAgICBob3N0ZWRab25lSWQ6IHpvbmVJZCwgbmFtZTogYXBpRG9tYWluLCB0eXBlOiAnQScsIGFsaWFzVGFyZ2V0OiB7IGRuc05hbWU6IGFwaURvbWFpbk5hbWUuYXR0clJlZ2lvbmFsRG9tYWluTmFtZSwgaG9zdGVkWm9uZUlkOiBhcGlEb21haW5OYW1lLmF0dHJSZWdpb25hbEhvc3RlZFpvbmVJZCB9LFxyXG4gICAgfSkgOiB1bmRlZmluZWQ7XHJcbiAgICBpZiAoYXBpUmVjb3JkICYmIGFwaURvbWFpbk5hbWUpIGFwaVJlY29yZC5hZGREZXBlbmRlbmN5KGFwaURvbWFpbk5hbWUpO1xyXG5cclxuICAgIGNvbnN0IGJhc2VVcmwgPSBoYXNDdXN0b21Eb21haW4gPyBgaHR0cHM6Ly8ke2FwaURvbWFpbn0vZXhhbXBsZXMvZ21haWwtdmlld2VyYCA6IGNkay5Gbi5qb2luKCcnLCBbaHR0cEFwaS5hdHRyQXBpRW5kcG9pbnQsICcvJywgYXBpU3RhZ2UucmVmLCAnL2dtYWlsLXZpZXdlciddKTtcclxuXHJcbiAgICAvLyBDbG91ZCBNYXAgTmFtZXNwYWNlIChMMilcclxuICAgIGNvbnN0IG5hbWVzcGFjZSA9IG5ldyBzZXJ2aWNlZGlzY292ZXJ5LlByaXZhdGVEbnNOYW1lc3BhY2UodGhpcywgJ1NlcnZpY2VOYW1lc3BhY2UnLCB7IG5hbWU6IG5zTmFtZSwgdnBjLCBkZXNjcmlwdGlvbjogJ05hbWVzcGFjZSBmb3IgbWFpbCBzZXJ2aWNlcycgfSk7XHJcblxyXG4gICAgLy8gVlBDIExpbmsgKEwxKVxyXG4gICAgY29uc3QgdnBjTGluayA9IG5ldyBhcGlnYXRld2F5djIuQ2ZuVnBjTGluayh0aGlzLCAnQXBpVnBjTGluaycsIHsgbmFtZTogJ21haWwtZXhhbXBsZS12cGNsaW5rJywgc3VibmV0SWRzOiBzZXJ2aWNlU3VibmV0SWRzLCBzZWN1cml0eUdyb3VwSWRzOiBbYXBpVnBjTGlua1NnLnNlY3VyaXR5R3JvdXBJZF0gfSk7XHJcblxyXG4gICAgLy8gQ2xvdWQgTWFwIFNlcnZpY2UgKEwyKVxyXG4gICAgY29uc3QgY2xvdWRNYXBTZXJ2aWNlID0gbmV3IHNlcnZpY2VkaXNjb3ZlcnkuU2VydmljZSh0aGlzLCAnQXBwQ2xvdWRNYXBTZXJ2aWNlJywge1xyXG4gICAgICBuYW1lOiAnbWFpbC1leGFtcGxlJywgbmFtZXNwYWNlLCBkbnNSZWNvcmRUeXBlOiBzZXJ2aWNlZGlzY292ZXJ5LkRuc1JlY29yZFR5cGUuU1JWLCBkbnNUdGw6IG5zVHRsLCByb3V0aW5nUG9saWN5OiBzZXJ2aWNlZGlzY292ZXJ5LlJvdXRpbmdQb2xpY3kuV0VJR0hURUQsIGN1c3RvbUhlYWx0aENoZWNrOiB7IGZhaWx1cmVUaHJlc2hvbGQ6IDEgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNlY3JldHMgTWFuYWdlciAtIHNpbmdsZSBzZWNyZXQgd2l0aCBHT09HTEVfQ0xJRU5UX1NFQ1JFVCBhbmQgU0VTU0lPTl9TRUNSRVRcclxuICAgIGNvbnN0IGFwcFNlY3JldHMgPSBuZXcgc2VjcmV0c21hbmFnZXIuU2VjcmV0KHRoaXMsICdBcHBTZWNyZXRzJywge1xyXG4gICAgICBzZWNyZXROYW1lOiBgJHtzc21QcmVmaXh9L3NlY3JldHNgLFxyXG4gICAgICBkZXNjcmlwdGlvbjogJ0FwcGxpY2F0aW9uIHNlY3JldHMgZm9yIG1haWwtZXhhbXBsZScsXHJcbiAgICAgIHNlY3JldE9iamVjdFZhbHVlOiB7XHJcbiAgICAgICAgR09PR0xFX0NMSUVOVF9TRUNSRVQ6IGNkay5TZWNyZXRWYWx1ZS51bnNhZmVQbGFpblRleHQoZ29vZ2xlQ2xpZW50U2VjcmV0KSxcclxuICAgICAgICBTRVNTSU9OX1NFQ1JFVDogY2RrLlNlY3JldFZhbHVlLnVuc2FmZVBsYWluVGV4dChzZXNzaW9uU2VjcmV0VmFsdWUpLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgLy8gSUFNIFJvbGVzIChMMilcclxuICAgIGNvbnN0IHRhc2tFeGVjUm9sZSA9IG5ldyBpYW0uUm9sZSh0aGlzLCAnVGFza0V4ZWN1dGlvblJvbGUnLCB7IGFzc3VtZWRCeTogbmV3IGlhbS5TZXJ2aWNlUHJpbmNpcGFsKCdlY3MtdGFza3MuYW1hem9uYXdzLmNvbScpLCBtYW5hZ2VkUG9saWNpZXM6IFtpYW0uTWFuYWdlZFBvbGljeS5mcm9tQXdzTWFuYWdlZFBvbGljeU5hbWUoJ3NlcnZpY2Utcm9sZS9BbWF6b25FQ1NUYXNrRXhlY3V0aW9uUm9sZVBvbGljeScpXSB9KTtcclxuICAgIHRhc2tFeGVjUm9sZS5hZGRUb1BvbGljeShuZXcgaWFtLlBvbGljeVN0YXRlbWVudCh7IGFjdGlvbnM6IFsnc3NtOkdldFBhcmFtZXRlcicsICdzc206R2V0UGFyYW1ldGVycycsICdzc206R2V0UGFyYW1ldGVyc0J5UGF0aCcsICdrbXM6RGVjcnlwdCddLCByZXNvdXJjZXM6IFtgYXJuOmF3czpzc206JHt0aGlzLnJlZ2lvbn06JHt0aGlzLmFjY291bnR9OnBhcmFtZXRlciR7c3NtUHJlZml4fSpgLCBgYXJuOmF3czprbXM6JHt0aGlzLnJlZ2lvbn06JHt0aGlzLmFjY291bnR9OmtleS8qYF0gfSkpO1xyXG4gICAgdGFza0V4ZWNSb2xlLmFkZFRvUG9saWN5KG5ldyBpYW0uUG9saWN5U3RhdGVtZW50KHsgYWN0aW9uczogWydzZWNyZXRzbWFuYWdlcjpHZXRTZWNyZXRWYWx1ZSddLCByZXNvdXJjZXM6IFthcHBTZWNyZXRzLnNlY3JldEFybl0gfSkpO1xyXG5cclxuICAgIGNvbnN0IHRhc2tSb2xlID0gbmV3IGlhbS5Sb2xlKHRoaXMsICdUYXNrUm9sZScsIHsgYXNzdW1lZEJ5OiBuZXcgaWFtLlNlcnZpY2VQcmluY2lwYWwoJ2Vjcy10YXNrcy5hbWF6b25hd3MuY29tJykgfSk7XHJcbiAgICB0YXNrUm9sZS5hZGRUb1BvbGljeShuZXcgaWFtLlBvbGljeVN0YXRlbWVudCh7IGFjdGlvbnM6IFsnc3NtOkdldFBhcmFtZXRlcicsICdzc206R2V0UGFyYW1ldGVycycsICdzc206R2V0UGFyYW1ldGVyc0J5UGF0aCcsICdrbXM6RGVjcnlwdCddLCByZXNvdXJjZXM6IFtgYXJuOmF3czpzc206JHt0aGlzLnJlZ2lvbn06JHt0aGlzLmFjY291bnR9OnBhcmFtZXRlciR7c3NtUHJlZml4fSpgLCBgYXJuOmF3czprbXM6JHt0aGlzLnJlZ2lvbn06JHt0aGlzLmFjY291bnR9OmtleS8qYF0gfSkpO1xyXG4gICAgdGFza1JvbGUuYWRkVG9Qb2xpY3kobmV3IGlhbS5Qb2xpY3lTdGF0ZW1lbnQoeyBhY3Rpb25zOiBbJ3NlY3JldHNtYW5hZ2VyOkdldFNlY3JldFZhbHVlJ10sIHJlc291cmNlczogW2FwcFNlY3JldHMuc2VjcmV0QXJuXSB9KSk7XHJcblxyXG4gICAgLy8gU1NNIFBhcmFtZXRlcnMgKEwyKSAtIGNyZWF0ZSBiZWZvcmUgdGFzayBkZWZpbml0aW9uIHNvIHRoZXkgY2FuIGJlIHJlZmVyZW5jZWRcclxuICAgIGNvbnN0IHNzbUJhc2VVcmwgPSBuZXcgc3NtLlN0cmluZ1BhcmFtZXRlcih0aGlzLCAnU3NtQmFzZVVybCcsIHsgcGFyYW1ldGVyTmFtZTogYCR7c3NtUHJlZml4fS9lbnYvQkFTRV9VUkxgLCBzdHJpbmdWYWx1ZTogYmFzZVVybC50b1N0cmluZygpIH0pO1xyXG4gICAgY29uc3Qgc3NtR29vZ2xlQ2xpZW50SWQgPSBuZXcgc3NtLlN0cmluZ1BhcmFtZXRlcih0aGlzLCAnU3NtR29vZ2xlQ2xpZW50SWQnLCB7IHBhcmFtZXRlck5hbWU6IGAke3NzbVByZWZpeH0vZW52L0dPT0dMRV9DTElFTlRfSURgLCBzdHJpbmdWYWx1ZTogZ29vZ2xlQ2xpZW50SWQgfSk7XHJcbiAgICBuZXcgc3NtLlN0cmluZ1BhcmFtZXRlcih0aGlzLCAnU3NtUG9ydCcsIHsgcGFyYW1ldGVyTmFtZTogYCR7c3NtUHJlZml4fS9lbnYvUE9SVGAsIHN0cmluZ1ZhbHVlOiBjb250YWluZXJQb3J0LnRvU3RyaW5nKCkgfSk7XHJcbiAgICBuZXcgc3NtLlN0cmluZ1BhcmFtZXRlcih0aGlzLCAnU3NtUHVibGljRW52JywgeyBwYXJhbWV0ZXJOYW1lOiBgJHtzc21QcmVmaXh9L2Vudi9OT0RFX0VOVmAsIHN0cmluZ1ZhbHVlOiBwdWJsaWNFbnZWYWx1ZSB9KTtcclxuXHJcbiAgICAvLyBFQ1MgVGFzayBEZWZpbml0aW9uIChMMilcclxuICAgIGNvbnN0IHRhc2tEZWYgPSBuZXcgZWNzLkZhcmdhdGVUYXNrRGVmaW5pdGlvbih0aGlzLCAnQXBwVGFza0RlZmluaXRpb24nLCB7IGZhbWlseTogJ21haWwtZXhhbXBsZScsIGNwdTogY29udGFpbmVyQ3B1LCBtZW1vcnlMaW1pdE1pQjogY29udGFpbmVyTWVtb3J5LCBleGVjdXRpb25Sb2xlOiB0YXNrRXhlY1JvbGUsIHRhc2tSb2xlIH0pO1xyXG4gICAgdGFza0RlZi5hZGRDb250YWluZXIoJ21haWwtZXhhbXBsZScsIHtcclxuICAgICAgaW1hZ2U6IGVjcy5Db250YWluZXJJbWFnZS5mcm9tRWNyUmVwb3NpdG9yeShlY3JSZXBvLCAnbGF0ZXN0JyksIHBvcnRNYXBwaW5nczogW3sgY29udGFpbmVyUG9ydCB9XSxcclxuICAgICAgbG9nZ2luZzogZWNzLkxvZ0RyaXZlcnMuYXdzTG9ncyh7IGxvZ0dyb3VwOiBhcHBMb2dHcm91cCwgc3RyZWFtUHJlZml4OiAnbWFpbC1leGFtcGxlJyB9KSxcclxuICAgICAgZW52aXJvbm1lbnQ6IHsgQ09ORklHX1NTTV9QUkVGSVg6IHNzbVByZWZpeCwgUE9SVDogY29udGFpbmVyUG9ydC50b1N0cmluZygpLCBCQVNFX1VSTDogYmFzZVVybC50b1N0cmluZygpLCBOT0RFX0VOVjogcHVibGljRW52VmFsdWUgfSxcclxuICAgICAgc2VjcmV0czoge1xyXG4gICAgICAgIEdPT0dMRV9DTElFTlRfSUQ6IGVjcy5TZWNyZXQuZnJvbVNzbVBhcmFtZXRlcihzc21Hb29nbGVDbGllbnRJZCksXHJcbiAgICAgICAgR09PR0xFX0NMSUVOVF9TRUNSRVQ6IGVjcy5TZWNyZXQuZnJvbVNlY3JldHNNYW5hZ2VyKGFwcFNlY3JldHMsICdHT09HTEVfQ0xJRU5UX1NFQ1JFVCcpLFxyXG4gICAgICAgIFNFU1NJT05fU0VDUkVUOiBlY3MuU2VjcmV0LmZyb21TZWNyZXRzTWFuYWdlcihhcHBTZWNyZXRzLCAnU0VTU0lPTl9TRUNSRVQnKSxcclxuICAgICAgfSxcclxuICAgIH0pO1xyXG5cclxuICAgIC8vIEVDUyBTZXJ2aWNlIChMMikgLSBhc3NvY2lhdGUgd2l0aCBzdGFuZGFsb25lIENsb3VkIE1hcCBzZXJ2aWNlIGZvciBBUEkgR2F0ZXdheSBpbnRlZ3JhdGlvblxyXG4gICAgY29uc3Qgc2VydmljZSA9IG5ldyBlY3MuRmFyZ2F0ZVNlcnZpY2UodGhpcywgJ0FwcFNlcnZpY2UnLCB7XHJcbiAgICAgIHNlcnZpY2VOYW1lOiAnbWFpbC1leGFtcGxlJywgY2x1c3RlciwgdGFza0RlZmluaXRpb246IHRhc2tEZWYsIGRlc2lyZWRDb3VudCxcclxuICAgICAgY2FwYWNpdHlQcm92aWRlclN0cmF0ZWdpZXM6IFt7IGNhcGFjaXR5UHJvdmlkZXI6ICdGQVJHQVRFX1NQT1QnLCB3ZWlnaHQ6IDQgfSwgeyBjYXBhY2l0eVByb3ZpZGVyOiAnRkFSR0FURScsIHdlaWdodDogMSB9XSxcclxuICAgICAgdnBjU3VibmV0czogeyBzdWJuZXRzOiBzZXJ2aWNlU3VibmV0SWRzLm1hcCgoaWQsIGkpID0+IGVjMi5TdWJuZXQuZnJvbVN1Ym5ldElkKHRoaXMsIGBTZXJ2aWNlU3VibmV0JHtpfWAsIGlkKSkgfSxcclxuICAgICAgc2VjdXJpdHlHcm91cHM6IFtzZXJ2aWNlU2ddLCBhc3NpZ25QdWJsaWNJcDogdXNlUHVibGljU3VibmV0cyA/PyBmYWxzZSwgbWluSGVhbHRoeVBlcmNlbnQ6IDUwLCBtYXhIZWFsdGh5UGVyY2VudDogMjAwLFxyXG4gICAgfSk7XHJcbiAgICBzZXJ2aWNlLmFzc29jaWF0ZUNsb3VkTWFwU2VydmljZSh7IHNlcnZpY2U6IGNsb3VkTWFwU2VydmljZSwgY29udGFpbmVyUG9ydCwgY29udGFpbmVyOiB0YXNrRGVmLmRlZmF1bHRDb250YWluZXIhIH0pO1xyXG5cclxuICAgIC8vIEFQSSBHYXRld2F5IEludGVncmF0aW9uIChMMSlcclxuICAgIGNvbnN0IGludGVncmF0aW9uID0gbmV3IGFwaWdhdGV3YXl2Mi5DZm5JbnRlZ3JhdGlvbih0aGlzLCAnTWFpbEludGVncmF0aW9uJywgeyBhcGlJZDogaHR0cEFwaS5yZWYsIGludGVncmF0aW9uVHlwZTogJ0hUVFBfUFJPWFknLCBpbnRlZ3JhdGlvbk1ldGhvZDogJ0FOWScsIGludGVncmF0aW9uVXJpOiBjbG91ZE1hcFNlcnZpY2Uuc2VydmljZUFybiwgY29ubmVjdGlvblR5cGU6ICdWUENfTElOSycsIGNvbm5lY3Rpb25JZDogdnBjTGluay5yZWYsIHBheWxvYWRGb3JtYXRWZXJzaW9uOiAnMS4wJyB9KTtcclxuICAgIG5ldyBhcGlnYXRld2F5djIuQ2ZuUm91dGUodGhpcywgJ0dtYWlsVmlld2VyUm91dGUnLCB7IGFwaUlkOiBodHRwQXBpLnJlZiwgcm91dGVLZXk6ICdBTlkgL2dtYWlsLXZpZXdlcicsIHRhcmdldDogYGludGVncmF0aW9ucy8ke2ludGVncmF0aW9uLnJlZn1gIH0pO1xyXG4gICAgbmV3IGFwaWdhdGV3YXl2Mi5DZm5Sb3V0ZSh0aGlzLCAnR21haWxWaWV3ZXJQcm94eVJvdXRlJywgeyBhcGlJZDogaHR0cEFwaS5yZWYsIHJvdXRlS2V5OiAnQU5ZIC9nbWFpbC12aWV3ZXIve3Byb3h5K30nLCB0YXJnZXQ6IGBpbnRlZ3JhdGlvbnMvJHtpbnRlZ3JhdGlvbi5yZWZ9YCB9KTtcclxuXHJcbiAgICAvLyBDb2RlQnVpbGQgUm9sZSAoTDIpXHJcbiAgICBjb25zdCBidWlsZFJvbGUgPSBuZXcgaWFtLlJvbGUodGhpcywgJ0NvZGVCdWlsZFJvbGUnLCB7IGFzc3VtZWRCeTogbmV3IGlhbS5TZXJ2aWNlUHJpbmNpcGFsKCdjb2RlYnVpbGQuYW1hem9uYXdzLmNvbScpIH0pO1xyXG4gICAgYnVpbGRSb2xlLmFkZFRvUG9saWN5KG5ldyBpYW0uUG9saWN5U3RhdGVtZW50KHsgYWN0aW9uczogWydsb2dzOkNyZWF0ZUxvZ0dyb3VwJywgJ2xvZ3M6Q3JlYXRlTG9nU3RyZWFtJywgJ2xvZ3M6UHV0TG9nRXZlbnRzJ10sIHJlc291cmNlczogWycqJ10gfSkpO1xyXG4gICAgYnVpbGRSb2xlLmFkZFRvUG9saWN5KG5ldyBpYW0uUG9saWN5U3RhdGVtZW50KHsgYWN0aW9uczogWydlY3I6R2V0QXV0aG9yaXphdGlvblRva2VuJywgJ2VjcjpCYXRjaENoZWNrTGF5ZXJBdmFpbGFiaWxpdHknLCAnZWNyOkNvbXBsZXRlTGF5ZXJVcGxvYWQnLCAnZWNyOkJhdGNoR2V0SW1hZ2UnLCAnZWNyOkRlc2NyaWJlUmVwb3NpdG9yaWVzJywgJ2VjcjpJbml0aWF0ZUxheWVyVXBsb2FkJywgJ2VjcjpQdXRJbWFnZScsICdlY3I6VXBsb2FkTGF5ZXJQYXJ0J10sIHJlc291cmNlczogWycqJ10gfSkpO1xyXG4gICAgYnVpbGRSb2xlLmFkZFRvUG9saWN5KG5ldyBpYW0uUG9saWN5U3RhdGVtZW50KHsgYWN0aW9uczogWydlY3M6VXBkYXRlU2VydmljZScsICdlY3M6RGVzY3JpYmVTZXJ2aWNlcycsICdlY3M6RGVzY3JpYmVDbHVzdGVycyddLCByZXNvdXJjZXM6IFsnKiddIH0pKTtcclxuICAgIGJ1aWxkUm9sZS5hZGRUb1BvbGljeShuZXcgaWFtLlBvbGljeVN0YXRlbWVudCh7IGFjdGlvbnM6IFsnc3NtOkdldFBhcmFtZXRlcicsICdzc206R2V0UGFyYW1ldGVycycsICdzc206R2V0UGFyYW1ldGVyc0J5UGF0aCddLCByZXNvdXJjZXM6IFsnKiddIH0pKTtcclxuICAgIGlmIChwcm9wcy5jb2RlQ29ubmVjdGlvbkFybikgYnVpbGRSb2xlLmFkZFRvUG9saWN5KG5ldyBpYW0uUG9saWN5U3RhdGVtZW50KHsgYWN0aW9uczogWydjb2RlY29ubmVjdGlvbnM6R2V0Q29ubmVjdGlvbicsICdjb2RlY29ubmVjdGlvbnM6R2V0Q29ubmVjdGlvblRva2VuJywgJ2NvZGVjb25uZWN0aW9uczpVc2VDb25uZWN0aW9uJ10sIHJlc291cmNlczogW3Byb3BzLmNvZGVDb25uZWN0aW9uQXJuXSB9KSk7XHJcblxyXG4gICAgLy8gQ29kZUJ1aWxkIFByb2plY3QgKEwyKVxyXG4gICAgbmV3IGNvZGVidWlsZC5Qcm9qZWN0KHRoaXMsICdDb2RlQnVpbGRQcm9qZWN0Jywge1xyXG4gICAgICBwcm9qZWN0TmFtZTogJ21haWwtZXhhbXBsZScsIHJvbGU6IGJ1aWxkUm9sZSxcclxuICAgICAgZW52aXJvbm1lbnQ6IHsgYnVpbGRJbWFnZTogY29kZWJ1aWxkLkxpbnV4QnVpbGRJbWFnZS5TVEFOREFSRF83XzAsIGNvbXB1dGVUeXBlOiBjb2RlYnVpbGQuQ29tcHV0ZVR5cGUuU01BTEwsIHByaXZpbGVnZWQ6IHRydWUsIGVudmlyb25tZW50VmFyaWFibGVzOiB7IEVDUl9VUkk6IHsgdmFsdWU6IGVjclJlcG8ucmVwb3NpdG9yeVVyaSB9LCBDTFVTVEVSX05BTUU6IHsgdmFsdWU6IGNsdXN0ZXIuY2x1c3Rlck5hbWUgfSwgU0VSVklDRV9OQU1FOiB7IHZhbHVlOiAnbWFpbC1leGFtcGxlJyB9IH0gfSxcclxuICAgICAgc291cmNlOiBjb2RlYnVpbGQuU291cmNlLmdpdEh1Yih7IG93bmVyOiBnaXRIdWJPd25lciwgcmVwbzogZ2l0SHViUmVwbywgYnJhbmNoT3JSZWY6IGdpdEh1YkJyYW5jaCB9KSxcclxuICAgICAgdGltZW91dDogY2RrLkR1cmF0aW9uLm1pbnV0ZXMoMzApLCBxdWV1ZWRUaW1lb3V0OiBjZGsuRHVyYXRpb24ubWludXRlcygzMCksIGJhZGdlOiB0cnVlLCBkZXNjcmlwdGlvbjogJ0J1aWxkICYgZGVwbG95IG1haWwtZXhhbXBsZSB0byBFQ1IgdGhlbiBmb3JjZSBFQ1MgZGVwbG95JyxcclxuICAgICAgYnVpbGRTcGVjOiBjb2RlYnVpbGQuQnVpbGRTcGVjLmZyb21PYmplY3Qoe1xyXG4gICAgICAgIHZlcnNpb246ICcwLjInLFxyXG4gICAgICAgIHBoYXNlczoge1xyXG4gICAgICAgICAgcHJlX2J1aWxkOiB7IGNvbW1hbmRzOiBbJ2VjaG8gXCJMb2dnaW5nIGluIHRvIEVDUlwiJywgJ2F3cyBlY3IgZ2V0LWxvZ2luLXBhc3N3b3JkIC0tcmVnaW9uICRBV1NfREVGQVVMVF9SRUdJT04gfCBkb2NrZXIgbG9naW4gLS11c2VybmFtZSBBV1MgLS1wYXNzd29yZC1zdGRpbiAkRUNSX1VSSScsICdJTUFHRV9UQUc9JHtDT0RFQlVJTERfUkVTT0xWRURfU09VUkNFX1ZFUlNJT046LWxhdGVzdH0nXSB9LFxyXG4gICAgICAgICAgYnVpbGQ6IHsgY29tbWFuZHM6IFsnY2QgZXhhbXBsZXMvZ21haWwtdmlld2VyJywgJ2RvY2tlciBidWlsZCAtdCAkRUNSX1VSSTpsYXRlc3QgLXQgJEVDUl9VUkk6JElNQUdFX1RBRyAuJ10gfSxcclxuICAgICAgICAgIHBvc3RfYnVpbGQ6IHsgY29tbWFuZHM6IFsnZG9ja2VyIHB1c2ggJEVDUl9VUkk6bGF0ZXN0JywgJ2RvY2tlciBwdXNoICRFQ1JfVVJJOiRJTUFHRV9UQUcnLCAnYXdzIGVjcyB1cGRhdGUtc2VydmljZSAtLWNsdXN0ZXIgJENMVVNURVJfTkFNRSAtLXNlcnZpY2UgJFNFUlZJQ0VfTkFNRSAtLWZvcmNlLW5ldy1kZXBsb3ltZW50J10gfSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFydGlmYWN0czogeyBmaWxlczogW10gfSwgZW52OiB7IHNoZWxsOiAnYmFzaCcgfSxcclxuICAgICAgfSksXHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBPdXRwdXRzXHJcbiAgICB0aGlzLmNsdXN0ZXJOYW1lID0gY2x1c3Rlci5jbHVzdGVyTmFtZTtcclxuICAgIG5ldyBjZGsuQ2ZuT3V0cHV0KHRoaXMsICdDbHVzdGVyTmFtZScsIHsgdmFsdWU6IHRoaXMuY2x1c3Rlck5hbWUgfSk7XHJcbiAgICB0aGlzLnJlcG9zaXRvcnlVcmkgPSBlY3JSZXBvLnJlcG9zaXRvcnlVcmk7XHJcbiAgICBuZXcgY2RrLkNmbk91dHB1dCh0aGlzLCAnUmVwb3NpdG9yeVVyaScsIHsgdmFsdWU6IHRoaXMucmVwb3NpdG9yeVVyaSB9KTtcclxuICAgIHRoaXMuYXBpSW52b2tlVXJsID0gYmFzZVVybC50b1N0cmluZygpO1xyXG4gICAgbmV3IGNkay5DZm5PdXRwdXQodGhpcywgJ0FwaUludm9rZVVybCcsIHsgdmFsdWU6IHRoaXMuYXBpSW52b2tlVXJsIH0pO1xyXG4gICAgdGhpcy5jbG91ZE1hcFNlcnZpY2VBcm4gPSBjbG91ZE1hcFNlcnZpY2Uuc2VydmljZUFybjtcclxuICAgIG5ldyBjZGsuQ2ZuT3V0cHV0KHRoaXMsICdDbG91ZE1hcFNlcnZpY2VBcm4nLCB7IHZhbHVlOiB0aGlzLmNsb3VkTWFwU2VydmljZUFybiB9KTtcclxuICB9XHJcbn1cclxuIl19